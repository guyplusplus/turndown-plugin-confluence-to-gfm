<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Turndown Demo</title>
<meta name="viewport" content="width=device-width">
<style>
  * {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }

  body {
    margin: 0 auto;
    font-family: courier, monospace, sans-serif;
    line-height: 1.3125;
    color: #333;
  }

  header {
    padding: 0.5em;
    background-color: #fff;
    text-align: center;
  }

  footer {
    font-size: 0.875em;
    text-align: center;
    color: #666;
  }

  h1,
  label[for="input"],
  label[for="output"] {
    margin: 0;
    font-size: 1em;
    font-weight: 700;
    letter-spacing: 0.0625em;
    text-transform: uppercase;
  }

  label[for="input"],
  label[for="output"] {
    font-weight: 400;
  }

  .source-link {
    font-size: 0.875em;
  }

  .row:before,
  .row:after {
    content: " ";
    display: table;
  }

  .row:after {
    clear: both;
  }

  .row {
    *zoom: 1;
  }

  .col,
  .form-group {
    padding: 0 0.5em;
  }

  @media (min-width: 36em) {
    .col {
      float: left;
      width: 50%;
    }
  }

  textarea {
    width: 100%;
    height: 36em;
    margin: 0;
    padding: 0.5em;
    overflow: auto;
    border: 1px solid;
    background-color: #fff;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
  }

  #input {
    background-color: #333;
    color: #fff;
    border: none;
  }

  select {
    display: block;
    width: 100%;
    font-size: inherit;
  }

  .form-group {
    display: inline-block;
  }

  .form-group label {
    font-size: 0.875em;
  }
</style>

<script src="https://unpkg.com/turndown/dist/turndown.js"></script>
<!-- <script src="https://unpkg.com/turndown-plugin-gfm/dist/turndown-plugin-gfm.js"></script> -->
<script src="./turndown-plugin-gfm-tmp.js"></script> <!-- pending pull request accepted -->
<script src="./turndown-plugin-confluence-to-gfm.js"></script>

<style>@media print {#ghostery-tracker-tally {display:none !important}}</style>
</head>
<body>
<header>
  <h1>Turndown with Confluence-to-GFM Plugin</h1>
  <a class="source-link" href="https://github.com/domchristie/turndown">Turndown source on GitHub</a>
  <a class="source-link" href="https://github.com/guyplusplus/turndown-plugin-confluence-to-gfm">Confluence-to-GFM Plugin source on GitHub</a>
</header>
<div class="row">
  <div class="col">
    <label for="input">HTML</label>
    <textarea cols="100" rows="10" id="input">
    
<!DOCTYPE html>
<html>
  <head>
    <title>The Handy Guide To Confluence : This is Test Page</title>
    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8" >
  </head>
  <body class="theme-default aui-theme-default">
    <div id="page">
      <div id="main" class="aui-page-panel">
        <div id="main-header">
          <div id="breadcrumb-section">
            <ol id="breadcrumbs">
              <li class="first">
                <span>
                  <a href="index.html">The Handy Guide To Confluence</a>
                </span>
              </li>
            </ol>
          </div>
          <h1 id="title-heading" class="pagetitle">
            <span id="title-text">The Handy Guide To Confluence : This is Test Page</span>
          </h1>
        </div>
        <div id="content" class="view">
          <div class="page-metadata">
            Created by
            <span class="author">John Blow</span>
            , last modified on Apr 15, 2021
          </div>
          <div id="main-content" class="wiki-content group">
            <h1 id="ThisisTestPage-Heading1">Heading 1</h1>
            <p>
              I love
              <strong>bold</strong>
              and also
              <em>italic</em>
              and also
              <em>
                <strong>boldItalic</strong>
              </em>
              and
              <em>
                <strong>italicBold</strong>
              </em>
              .
            </p>
            <h2 id="ThisisTestPage-Heading2">Heading 2</h2>
            <p>
              Trying other styles such as
              <u>underline</u>
              and
              <del>strike</del>
              . I add here 2 small
              <img class="emoticon emoticon-laugh" data-emoji-id="1f600" data-emoji-shortname=":grinning:" data-emoji-fallback="&#x1f600;" src="images/icons/emoticons/biggrin.png" width="16" height="16" data-emoticon-name="laugh" alt="(big grin)" />
              <img class="emoticon emoticon-blue-star" data-emoji-id="1f622" data-emoji-shortname=":cry:" data-emoji-fallback="&#x1f622;" src="images/icons/emoticons/72/1f622.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)" />
              faces.
            </p>
            <p>
              I add here and this is
              <code>a short code</code>
              example.
            </p>
            <p>
              An option for
              <sub>subscript</sub>
              and
              <sup>superscript</sup>
              to see followed by an action list.
            </p>
            <ul class="inline-task-list" data-inline-tasks-content-id="1840775173">
              <li data-inline-task-id="1">
                <span class="placeholder-inline-tasks">Action 1</span>
              </li>
              <li class="checked" data-inline-task-id="2">
                <span class="placeholder-inline-tasks">
                  Action 2
                  <strong>done</strong>
                </span>
              </li>
            </ul>
            <h2 id="ThisisTestPage-TableHeading2">Table Heading 2</h2>
            <p>This first table is ignored as it has no header.</p>
            <div class="table-wrap">
              <table data-layout="default" class="confluenceTable">
                <colgroup>
                  <col style="width: 254.0px;" />
                  <col style="width: 253.0px;" />
                  <col style="width: 253.0px;" />
                </colgroup>
                <tbody>
                  <tr>
                    <td class="confluenceTd">
                      <p>1-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>1-2</p>
                    </td>
                    <td class="confluenceTd">
                      <p>1-3</p>
                    </td>
                  </tr>
                  <tr>
                    <td class="confluenceTd">
                      <p>
                        2-1 with
                        <strong>bold</strong>
                      </p>
                    </td>
                    <td class="confluenceTd">
                      <p />
                    </td>
                    <td class="confluenceTd">
                      <p />
                    </td>
                  </tr>
                  <tr>
                    <td class="confluenceTd">
                      <p>3-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>
                        with
                        <em>italic</em>
                      </p>
                    </td>
                    <td class="confluenceTd">
                      <p>3-3</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p />
            <div class="table-wrap">
              <table data-layout="default" class="confluenceTable">
                <colgroup>
                  <col style="width: 380.0px;" />
                  <col style="width: 380.0px;" />
                </colgroup>
                <tbody>
                  <tr>
                    <th class="confluenceTh">
                      <p>
                        <strong>h1</strong>
                      </p>
                    </th>
                    <th class="confluenceTh">
                      <p>
                        <strong>h2</strong>
                      </p>
                    </th>
                  </tr>
                  <tr>
                    <td class="confluenceTd">
                      <p>2-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>2-2</p>
                    </td>
                  </tr>
                  <tr>
                    <td class="confluenceTd">
                      <p>3-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>3-2</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="table-wrap">
              <table data-layout="default" class="confluenceTable">
                <colgroup>
                  <col />
                  <col style="width: 340.0px;" />
                  <col style="width: 340.0px;" />
                </colgroup>
                <tbody>
                  <tr>
                    <th class="numberingColumn confluenceTh" />
                    <th class="confluenceTh">
                      <p>
                        <strong>h1</strong>
                      </p>
                    </th>
                    <th class="confluenceTh">
                      <p>
                        <strong>h2</strong>
                      </p>
                    </th>
                  </tr>
                  <tr>
                    <td class="numberingColumn confluenceTd">1</td>
                    <td class="confluenceTd">
                      <p>2-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>2-2</p>
                    </td>
                  </tr>
                  <tr>
                    <td class="numberingColumn confluenceTd">2</td>
                    <td class="confluenceTd">
                      <p>3-1</p>
                    </td>
                    <td class="confluenceTd">
                      <p>3-2</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h3 id="ThisisTestPage-Heading3">Heading 3</h3>
            <p>
              This is
              <span style="color: rgb(255,196,0);">
                <u>yellow underlined</u>
              </span>
              text on the left.
            </p>
            <p style="text-align: center;">
              This is
              <em>
                <span style="color: rgb(255,86,48);">red italic text</span>
              </em>
              in the middle.
            </p>
            <p style="text-align: right;">
              This is
              <strong>
                <span style="color: rgb(76,154,255);">blue bold text</span>
              </strong>
              on the right.
            </p>
            <p>Thank you.</p>
            <h3 id="ThisisTestPage-Secondheading3">Second heading 3</h3>
            <p>With a bullet and sub-bullet:</p>
            <ul>
              <li>
                <p>B1</p>
              </li>
              <li>
                <p>B2</p>
                <ul>
                  <li>
                    <p>B2-1</p>
                  </li>
                  <li>
                    <p>B2-2</p>
                    <ul>
                      <li>
                        <p>B2-2-1</p>
                        <ul>
                          <li>
                            <p>B2-2-1-1</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
                <p>B3</p>
              </li>
            </ul>
            <p>And some numbers and bullet mixed</p>
            <ol>
              <li>
                <p>N1</p>
              </li>
              <li>
                <p>N2</p>
                <ol>
                  <li>
                    <p>N2-1</p>
                    <ol>
                      <li>
                        <p>N2-1-1</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>N2-2</p>
                  </li>
                </ol>
              </li>
              <li>
                <p>N3</p>
              </li>
              <li>
                <p>N4</p>
                <ul>
                  <li>
                    <p>N4-B1</p>
                    <ul>
                      <li>
                        <p>N4-B1-1</p>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ol>
            <h2 id="ThisisTestPage-CodeSample">Code Sample</h2>
            <p>In JAVA</p>
            <p />
            <div class="code panel pdl" style="border-width: 1px;">
              <div class="codeContent panelContent pdl">
                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">System.out.println("Hello World");</pre>
              </div>
            </div>
            <p>In XML</p>
            <p />
            <div class="code panel pdl" style="border-width: 1px;">
              <div class="codeContent panelContent pdl">
                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;root&gt;
  &lt;node&gt;abc&lt;/node&gt;
&lt;/root&gt;</pre>
              </div>
            </div>
            <p>And in JSON</p>
            <p />
            <div class="code panel pdl" style="border-width: 1px;">
              <div class="codeContent panelContent pdl">
                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
 "key": "value",
 "array": [1, 2, 3]
}</pre>
              </div>
            </div>
            <p>
              And a date:
              <time datetime="2021-04-15" class="date-upcoming">15 Apr 2021</time>
              followed by a basic quote
            </p>
            <blockquote>
              <p>“to be or not to be, I don’t know”</p>
            </blockquote>
            <hr />
            <p>And another quote</p>
            <blockquote>
              <p>“I still don’t know”</p>
            </blockquote>
            <p />
          </div>
        </div>
      </div>
      <div id="footer" role="contentinfo">
        <section class="footer-body">
          <p>Document generated by Confluence on Apr 15, 2021 11:45</p>
          <div id="footer-logo">
            <a href="http://www.atlassian.com/">Atlassian</a>
          </div>
        </section>
      </div>
    </div>
  </body>
</html>

    </textarea>
  </div>
  <div class="col">
    <label for="output">Markdown</label>
    <textarea readonly="readonly" cols="100" rows="10" id="output"></textarea>
  </div>
</div>

<div class="row">
  <form method="get" action="/turndown" id="options">
    <div class="form-group">
      <label for="headingStyle">Heading style</label>
      <select name="headingStyle" id="headingStyle">
        <option value="setext">setext</option>
        <option value="atx" selected="selected">atx</option>
      </select>
    </div>

    <div class="form-group">
      <label for="hr">Horizontal rule</label>
      <select name="hr" id="hr">
        <option value="* * *" selected="selected">* * *</option>
        <option value="- - -">- - -</option>
        <option value="_ _ _">_ _ _</option>
      </select>
    </div>

    <div class="form-group">
      <label for="bulletListMarker">Bullet</label>
      <select name="bulletListMarker" id="bulletListMarker">
        <option value="*" selected="selected">*</option>
        <option value="-">-</option>
        <option value="+">+</option>
      </select>
    </div>

    <div class="form-group">
      <label for="codeBlockStyle">Code block style</label>
      <select name="codeBlockStyle" id="codeBlockStyle">
        <option value="indented">indented</option>
        <option value="fenced" selected="selected">fenced</option>
      </select>
    </div>

    <div class="form-group">
      <label for="fence">Fence</label>
      <select name="fence" id="fence">
        <option value="```" selected="selected">```</option>
        <option value="~~~">~~~</option>
      </select>
    </div>

    <div class="form-group">
      <label for="emDelimiter">Em delimiter</label>
      <select name="emDelimiter" id="emDelimiter">
        <option value="_" selected="selected">_</option>
        <option value="*">*</option>
      </select>
    </div>

    <div class="form-group">
      <label for="strongDelimiter">Strong delimiter</label>
      <select name="strongDelimiter" id="strongDelimiter">
        <option value="**" selected="selected">**</option>
        <option value="__">__</option>
      </select>
    </div>

    <div class="form-group">
      <label for="linkStyle">Link style</label>
      <select name="linkStyle" id="linkStyle">
        <option value="inlined" selected="selected">inlined</option>
        <option value="referenced">referenced</option>
      </select>
    </div>

    <div class="form-group">
      <label for="linkReferenceStyle">Link reference style</label>
      <select name="linkReferenceStyle" id="linkReferenceStyle">
        <option value="full" selected="selected">full</option>
        <option value="collapsed">collapsed</option>
        <option value="shortcut">shortcut</option>
      </select>
    </div>
  </form>
</div>

<footer><p>Turndown is copyright © 2017 <a href="http://www.domchristie.co.uk/">Dom Christie</a> and is released under the MIT license</p></footer>
<script>
  ;(function () {
    var input = document.getElementById('input')
    var output = document.getElementById('output')
    var optionsForm = document.getElementById('options')
    var turndownService = new window.TurndownService(options())
    
    //var turndownPluginGfm = new window.turndownPluginGfm(options())
    //turndownService.use(turndownPluginGfm.tables)
    //turndownService.use(turndownPluginGfm.strikethrough)
    turndownPluginConfluence.confluenceGfm(turndownService)
    turndownPluginGfm.gfm(turndownService)

    input.addEventListener('input', update)

    optionsForm.addEventListener('change', function () {
      turndownService = new window.TurndownService(options())

      //var turndownPluginGfm = new window.turndownPluginGfm(options())
      //turndownService.use(turndownPluginGfm.tables)
      //turndownService.use(turndownPluginGfm.strikethrough)
      turndownPluginConfluence.confluenceGfm(turndownService)
      turndownPluginGfm.gfm(turndownService)

      update()
    })

    update()

    function update () {
      output.value = turndownService.turndown(input.value)
    }

    function options () {
      var opts = {}
      var inputs = optionsForm.getElementsByTagName('select')
      for (var i = 0; i < inputs.length; i++) {
        var input = inputs[i]
        opts[input.name] = input.value
      }
      return opts
    }
  })()
</script>


</body></html>